{"version":3,"sources":["webpack:///./src/core/utils/cookie-util.js","webpack:///src/components/login/login.vue","webpack:///./src/components/login/login.vue?30af","webpack:///./src/components/login/login.vue"],"names":["cookie_util","name","arr","RegExp","reg","document","cookie","match","login","data","form","userName","password","rememberMe","kaptchaReceived","msg","loading","verifyCode","this","$api","core","getVerifyCode","methods","setLoginHeight","h","documentElement","clientHeight","loginContext","$refs","style","height","offsetTop","send","_this2","$store","dispatch","then","_ref","isLogin","console","log","go","bean","sso","goBizApp","serviceUrl","window","location","href","$router","push","config","defaultRoute","authApps","state","contextData","user","extension","bizApp","i","len","length","appCode","appUrl","refreshVerifyCode","_this3","getCaptcha","Math","random","res","body","forgetPassword","registerBuyer","debug","getBuyerRegAddress","ret","address","created","mounted","_this","onresize","login_login","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","on","keyup","$event","_k","keyCode","key","attrs","model","placeholder","value","callback","$$v","$set","expression","type","auto-complete","span","title","width","domProps","innerHTML","_s","click","checked","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.4f74a15a57865c3557cf.js","sourcesContent":["export default {\n// 获取cookie\n  getCookie (name) {\n    let arr = new RegExp('(^| )' + name + '=([^;]*)(;|$)');\n    let reg = new RegExp('(^| )' + name + '=([^;]*)(;|$)');\n    if (arr === document.cookie.match(reg)) {\n      return (arr[2]);\n    } else {\n      return null;\n    }\n  },\n\n  setCookie (name, value, expiredays) { // 设置cookie,增加到vue实例方便全局调用\n    let exdate = new Date();\n    exdate.setDate(exdate.getDate() + expiredays);\n    document.cookie = name + '=' + escape(value) + ((expiredays == null) ? '' : ';expires=' + exdate.toGMTString());\n  },\n  delCookie (name) { // 删除cookie\n    let exp = new Date();\n    exp.setTime(exp.getTime() - 1);\n    let cval = this.getCookie(name);\n    if (cval != null) {\n      document.cookie = name + '=' + cval + ';expires=' + exp.toGMTString();\n    }\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/utils/cookie-util.js","<template>\n  <section class=\"login-wrapper\">\n    <pl-header></pl-header>\n    <div class=\"login-context\" ref=\"loginContext\">\n      <div class=\"login-container\">\n        <div class=\"login-panel\" @keyup.enter=\"send\">\n          <div class=\"login-title\">\n            登录\n          </div>\n          <el-form ref=\"form\" :model=\"form\" class=\"login-form\">\n            <el-form-item>\n              <el-input v-model=\"form.userName\" placeholder=\"账号\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-input type=\"password\" v-model=\"form.password\" auto-complete=\"off\" placeholder=\"密码\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-row>\n                <el-col :span=\"16\">\n                  <el-input v-model=\"form.kaptchaReceived\" auto-complete=\"off\" placeholder=\"请输入验证码\"></el-input>\n                </el-col>\n                <el-col :span=\"8\" class=\"text-right\">\n                  <div  class=\"code-img\">\n                    <div title=\"点击刷新验证码\"  width=\"80\" v-html=\"verifyCode\"  @click=\"refreshVerifyCode\"></div>\n                  </div>\n                </el-col>\n              </el-row>\n            </el-form-item>\n            <el-form-item class=\"login-btn-wrapper\">\n              <el-button  type=\"primary\" class=\"login-btn\" @click=\"send\" :loading=\"loading\">登录</el-button>\n            </el-form-item>\n            <el-form-item class=\"login-btn-wrapper\">\n              <el-button type=\"primary\" class=\"login-btn\" @click=\"registerBuyer\">免费注册</el-button>\n            </el-form-item>\n            <!--<el-form-item>-->\n              <el-row>\n                <el-col :span=\"9\">\n                  <el-checkbox v-model=\"form.rememberMe\" class=\"savePassword\" checked>记住密码</el-checkbox>\n                </el-col>\n                <el-col :span=\"12\">\n                  <el-button type=\"text\" class=\"forgetPass\" @click=\"forgetPassword\">忘记密码&nbsp;?</el-button>\n                </el-col>\n\n              </el-row>\n            <!--</el-form-item>-->\n          </el-form>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\n  // let prodEnv = require('../../../config/prod.env');\n  // let devEnv = require('../../../config/dev.env');\n  import config from '../../config';\n  import { MsgType } from 'core/constants';\n  import cookieUtil from '../../core/utils/cookie-util';\n  export default {\n    data () {\n      return {\n        form: {\n          userName: '',\n          password: '',\n          rememberMe: true,\n          kaptchaReceived: ''\n        },\n        msg: '<em>hello world</em>',\n        loading: false,\n        verifyCode: this.$api.core.getVerifyCode()\n      };\n    },\n    methods: {\n      setLoginHeight () {\n        let h = document.documentElement.clientHeight;\n        let loginContext = this.$refs.loginContext;\n        if (loginContext) {\n          loginContext.style.height = (h - loginContext.offsetTop) + 'px';\n        }\n      },\n      send () {\n        this.loading = true;\n        // this.$router.push({name: 'bsp.biz.notice-list'});// 暂时性\n        this.$store.dispatch('login', this.form)\n          .then(({isLogin, msg}) => {\n            this.loading = false;\n            if (isLogin) {\n              console.log(cookieUtil.getCookie('isLogin'));\n              this.go(msg);\n            }\n          }\n        );\n      },\n      go (msg) {\n        if (msg.bean && msg.bean.sso) {\n          this.goBizApp(); // 个性化需求,跳转业务系统\n          return;\n        }\n        if (msg.bean && msg.bean.serviceUrl) {\n          window.location.href = msg.bean.serviceUrl;\n        } else {\n          this.$router.push(config.defaultRoute());\n        }\n      },\n      goBizApp () {\n        let authApps = this.$store.state.contextData.user.extension.authApps;\n        let bizApp = null;\n        if (authApps) {\n          for (let i = 0, len = authApps.length; i < len; i++) {\n            if (authApps[i].appCode === 'CHAINBILL') {\n              bizApp = authApps[i];\n              break;\n            }\n          }\n        }\n\n        if (bizApp) {\n          window.location.href = bizApp.appUrl;\n        } else {\n          this.$router.push(config.defaultRoute());\n        }\n      },\n      refreshVerifyCode () {\n        this.$api.core.getCaptcha(Math.random()).then(res =>{\n          this.verifyCode=res.body;\n          this.loading = false;\n        });\n      },\n      forgetPassword () {\n        this.$router.push({name: 'forgetPass'});\n      },\n      registerBuyer () {\n        console.debug(\"registerBuyer...\");\n        //let registerPath = process.env.NODE_ENV === 'production' ? prodEnv.registerPath : devEnv.registerPath;\n        if (process.env.NODE_ENV === 'production') {\n          this.$api.core.getBuyerRegAddress().then(ret => {\n            window.location.href = ret.address;\n          });\n        } else {\n          this.$router.push({name: ''});\n        }\n        this.$router.push({'name': 'register'});\n      }\n    },\n    created () {\n      this.refreshVerifyCode();\n      if (this.$store.state.isLogin) {\n        this.$router.push(config.defaultRoute());\n      }\n    },\n    mounted () {\n      this.setLoginHeight();\n      let _this = this;\n      window.onresize = function () {\n        _this.setLoginHeight();\n      };\n    }\n  };\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\">\n  @import \"../../assets/scss/index\";\n  .login-wrapper {\n    background: #fff;\n    overflow: hidden;\n    .login-context {\n      min-height: 500px;\n      /*margin-top: 60px;*/\n      background: url(\"img/login-bg.png\") no-repeat center 0;\n      .login-container {\n        @extend .container;\n        position: relative;\n        height: 100%;\n        .login-panel {\n          position: absolute;\n          top: calc(45% - 180px);\n          right: 100px;\n          box-shadow: 2px 2px 5px rgb(204, 204, 204);\n          height: 400px;\n          width: 330px;\n          background: rgba(255, 255, 255, 0.8);\n          .login-title {\n            height: 50px;\n            line-height: 50px;\n            padding-left: 30px;\n            font-size: 20px;\n            border-bottom: 1px solid $border-color;\n          }\n          .login-form {\n            padding: 30px 30px;\n            .login-btn-wrapper{\n              text-align: right;\n            }\n            .forgetPass {\n              margin-left: 100px;\n              padding: 0px 0px;\n            }\n            .savePassword {\n              padding: 0px 0px;\n            }\n          }\n          .login-btn {\n            margin: 5px 0px;\n            width: 100%;\n          }\n          .code-img{\n            height: 36px;\n            img{\n              cursor: pointer;\n            }\n           // background: url(./img/loading.gif) no-repeat center 0;\n          }\n        }\n      }\n    }\n  }\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/login/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"login-wrapper\"},[_c('pl-header'),_vm._v(\" \"),_c('div',{ref:\"loginContext\",staticClass:\"login-context\"},[_c('div',{staticClass:\"login-container\"},[_c('div',{staticClass:\"login-panel\",on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.send($event)}}},[_c('div',{staticClass:\"login-title\"},[_vm._v(\"\\n          登录\\n        \")]),_vm._v(\" \"),_c('el-form',{ref:\"form\",staticClass:\"login-form\",attrs:{\"model\":_vm.form}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"账号\"},model:{value:(_vm.form.userName),callback:function ($$v) {_vm.$set(_vm.form, \"userName\", $$v)},expression:\"form.userName\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{attrs:{\"type\":\"password\",\"auto-complete\":\"off\",\"placeholder\":\"密码\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-row',[_c('el-col',{attrs:{\"span\":16}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.form.kaptchaReceived),callback:function ($$v) {_vm.$set(_vm.form, \"kaptchaReceived\", $$v)},expression:\"form.kaptchaReceived\"}})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"text-right\",attrs:{\"span\":8}},[_c('div',{staticClass:\"code-img\"},[_c('div',{attrs:{\"title\":\"点击刷新验证码\",\"width\":\"80\"},domProps:{\"innerHTML\":_vm._s(_vm.verifyCode)},on:{\"click\":_vm.refreshVerifyCode}})])])],1)],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"login-btn-wrapper\"},[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.send}},[_vm._v(\"登录\")])],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"login-btn-wrapper\"},[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.registerBuyer}},[_vm._v(\"免费注册\")])],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":9}},[_c('el-checkbox',{staticClass:\"savePassword\",attrs:{\"checked\":\"\"},model:{value:(_vm.form.rememberMe),callback:function ($$v) {_vm.$set(_vm.form, \"rememberMe\", $$v)},expression:\"form.rememberMe\"}},[_vm._v(\"记住密码\")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-button',{staticClass:\"forgetPass\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.forgetPassword}},[_vm._v(\"忘记密码 ?\")])],1)],1)],1)],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0fe7178c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/login/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0fe7178c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0fe7178c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}