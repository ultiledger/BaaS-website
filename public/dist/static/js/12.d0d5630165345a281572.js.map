{"version":3,"sources":["webpack:///./src/core/utils/validators.js","webpack:///src/components/register/register.vue","webpack:///./src/components/register/register.vue?a92a","webpack:///./src/components/register/register.vue"],"names":["validators","methods","socCrCodeValidator","rule","value","callback","test","Error","certNoValidator","certType","bankNoValidator","this","$api","cust","customer","checkAcctNo","cusId","then","ret","telephoneValidator","params","phoneNo","reqType","userId","excludeCurUser","vue_common_default","a","api","core","checkUserExist","existForTrue","param","emailValidator","loginNameValidator","bsp","user","checkCode","type","msg","checkNum","register","mixins","data","_this","registerForm","loginName","email","contactorId","password","password2","verifyCode","refreshVerifyCode","msgVerifyCode","newUser","loading","time","smsCodeLoading","btnText","rules","required","message","trigger","validator","length","min","max","apitemp","result","phoneCallback","checkVertifyCode","computed","smsBtnText","watch","resetForm","obj","userName","go","bean","serviceUrl","window","location","href","$router","push","name","getSMS","_this2","console","debug","$refs","validateField","errorMessage","timer","setInterval","clearInterval","sendSMS","submitForm","formName","_this3","validate","valid","form","username","kaptchaReceived","grant_type","client","appCode","config","$store","dispatch","_ref","isLogin","resetFields","_this4","getCaptcha","Math","random","res","body","register_register","render","_vm","_h","$createElement","_c","_self","_v","staticClass","attrs","show-left","slot","ref","model","label-width","fixed-width","prop","label","span","disabled","placeholder","tips","$$v","$set","expression","_e","staticStyle","padding-right","title","width","domProps","innerHTML","_s","on","click","padding","text-align","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.d0d5630165345a281572.js","sourcesContent":["import Vue from 'vue';\nexport default {\n  methods: {\n    // 统一社会信用代码校验器\n    socCrCodeValidator (rule, value, callback) {\n      if (!value || value === '') {\n        callback(new Error('请输入统一社会信用代码'));\n      } else {\n        if (!(/(^[0-9A-HJ-NPQRTUWXY]{2}\\d{6}[0-9A-HJ-NPQRTUWXY]{10}$)/.test(value))) {\n          callback(new Error('请输入合理的统一社会信用代码'));\n        }\n        callback();\n      }\n    },\n    // 证件号码校验器\n    certNoValidator (rule, value, callback) {\n      let certType = rule.certType;\n      switch (certType) {\n        case 'id_type_1':\n          if (!(/(^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$)|(^[1-9]\\d{5}\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{2}$)/.test(value))) {\n            callback(new Error('请输入正确的证件号码'));\n          } else {\n            callback();\n          }\n          break;\n        case 'id_type_2':\n          if (!(/^[a-zA-Z0-9]{5,17}$/.test(value))) {\n            callback(new Error('请输入正确的证件号码'));\n          } else {\n            callback();\n          }\n          break;\n        case 'id_type_3':\n          if (!(/^[HMChmc]{1}([0-9]{8,10})$/.test(value))) {\n            callback(new Error('请输入正确的证件号码'));\n          } else {\n            callback();\n          }\n          break;\n        case 'id_type_4':\n          if (!(/^[0-9]{8,10}$/.test(value))) {\n            callback(new Error('请输入正确的证件号码'));\n          } else {\n            callback();\n          }\n          break;\n        default:\n          callback(new Error('请输入正确的证件号码'));\n      }\n    },\n    // 银行卡号校验器\n    bankNoValidator (rule, value, callback) {\n      if (!value || value === '') {\n        callback(new Error('银行卡号码不能为空'));\n      } else {\n        if (!(/^([1-9]{1})\\d{1,30}$/.test(value))) {\n          callback(new Error('请输入合理的银行卡号码'));\n        } else {\n          this.$api.cust.customer.checkAcctNo(value, rule.cusId ? rule.cusId : '').then(ret => {\n            if (ret) {\n              callback(new Error('银行卡号码已注册'));\n            } else {\n              callback();\n            }\n          });\n        }\n      }\n    },\n    // 验证电话号码\n    telephoneValidator (rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入手机号码'));\n      } else {\n        if (!(/^1[34578]\\d{9}$/.test(value))) {\n          callback(new Error('请输入合理手机号码'));\n        } else {\n          let params = {'phoneNo': value, 'reqType': 'phoneNo'};\n          if (rule.userId) {\n            params.userId = rule.userId;\n          }\n          if (rule.excludeCurUser) {\n            params.excludeCurUser = rule.excludeCurUser;\n          }\n          Vue.api.core.checkUserExist(params).then(ret => {\n            if (rule.existForTrue) {\n              if (ret) {\n                callback();\n                if (rule.callback) {\n                  rule.callback(ret, rule.param);\n                }\n              } else {\n                callback(new Error('该手机号还未注册'));\n                rule.callback();\n              }\n            } else {\n              if (ret) {\n                callback(new Error('手机号码已注册'));\n              } else {\n                callback();\n              }\n            }\n          });\n        }\n      }\n    },\n    // 验证邮件\n    emailValidator (rule, value, callback) {\n      if (!value || value === '') {\n        callback();\n      }\n      let reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;\n      if (!reg.test(value)) {\n        callback(new Error('邮箱格式不正确'));\n      } else {\n        callback();\n      }\n    },\n    // 检验登录名是否存在\n    loginNameValidator (rule, value, callback) {\n      if (!value) {\n        callback();\n      } else {\n        this.$api.bsp.user.checkCode(rule.userId, value).then(ret => {\n          if (ret.type === 'success' && !ret.msg) {\n            callback(new Error('登录名已存在'));\n          } else {\n            callback();\n          }\n        });\n      }\n    },\n    checkNum (rule, value, callback) {\n      if (value) {\n        if (!(/^\\d*$/.test(value))) {\n          callback(new Error('请输入数字!'));\n        } else {\n          callback();\n        }\n      }\n      callback();\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/utils/validators.js","<template>\n  <div>\n    <pl-header></pl-header>\n    <pl-layout class=\"layout-contianer\" :show-left='false'>\n      <pl-content-box slot=\"right\">\n        <br>\n        <div class=\"bolck-title\">\n          <span>注册信息</span>\n        </div>\n        <el-form :model=\"registerForm\" :rules=\"rules\" ref=\"registerForm\" label-width=\"100px\" class=\"register-form\">\n          <pl-content-box-block :fixed-width=\"false\">\n            <pl-content-box-card class=\"accreditation-content-box no-border\">\n              <div class=\"accreditation-content\">\n                <el-form-item prop=\"loginName\" label=\"用户姓名\">\n                  <el-row>\n                    <el-col :span=\"12\">\n                      <el-input :disabled=\"!newUser\" v-model=\"registerForm.loginName\" placeholder=\"请输入用户姓名\" tips=\"您的姓名将作为系统的用户名\">\n                      </el-input>\n                    </el-col>\n                    <!--<el-col :span=\"12\">-->\n                      <!--<pl-content-item-text>-->\n                        <!--<el-radio v-model=\"newUser\" :label=\"true\">我是新用户</el-radio>-->\n                        <!--<el-radio v-model=\"newUser\" :label=\"false\">我已注册过</el-radio>-->\n                      <!--</pl-content-item-text>-->\n                    <!--</el-col>-->\n                  </el-row>\n\n                </el-form-item>\n                <el-form-item prop=\"email\" label=\"注册邮箱\">\n                  <el-row>\n                    <el-col :span=\"12\">\n                      <el-input  v-model=\"registerForm.email\" placeholder=\"请输入注册邮箱\" tips=\"您的注册邮箱可作为登录账户名称\">\n                      </el-input>\n                    </el-col>\n                    <!--<el-col :span=\"12\">-->\n                    <!--<pl-content-item-text>-->\n                    <!--<el-radio v-model=\"newUser\" :label=\"true\">我是新用户</el-radio>-->\n                    <!--<el-radio v-model=\"newUser\" :label=\"false\">我已注册过</el-radio>-->\n                    <!--</pl-content-item-text>-->\n                    <!--</el-col>-->\n                  </el-row>\n\n                </el-form-item>\n                <el-form-item prop=\"phoneNo\" label=\"手机号\">\n                    <el-input  v-model=\"registerForm.phoneNo\" placeholder=\"建议使用常用手机\" tips=\"注册成功后，您可以用该手机登录和找回密码\">\n                    </el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\" label=\"登录密码\" v-if=\"newUser\">\n                  <el-input  v-model=\"registerForm.password\" type=\"password\" placeholder=\"请输入登录密码\" tips=\"建议使用字母、数字和符号两种以上的组合，6-20个字符\">\n                  </el-input>\n                </el-form-item>\n                <el-form-item prop=\"password2\" label=\"确认密码\"  v-if=\"newUser\">\n                  <el-input  v-model=\"registerForm.password2\" type=\"password\" placeholder=\"请再次输入密码\" tips=\"请再次输入密码\">\n                  </el-input>\n                </el-form-item>\n                <el-form-item prop=\"verifyCode\" label=\"验证码\"  v-if=\"newUser\">\n                  <el-row >\n                    <el-col :span=\"20\"  style=\"padding-right: 4px;\">\n                      <el-input v-model=\"registerForm.verifyCode\" placeholder=\"请输入验证码\">\n                      </el-input>\n                    </el-col>\n                    <el-col :span=\"4\" class=\"text-right\">\n                      <div class=\"code-img\">\n                        <div title=\"点击刷新验证码\"  width=\"80\" v-html=\"verifyCode\"  @click=\"refreshVerifyCode\"/>\n                      </div>\n                    </el-col>\n                  </el-row>\n                </el-form-item>\n                <el-form-item prop=\"msgVerifyCode\" label=\"短信验证码\">\n                  <el-row >\n                    <el-col :span=\"19\" style=\"padding-right: 5px;\">\n                      <el-input v-model=\"registerForm.msgVerifyCode\" placeholder=\"请输入手机验证码\">\n                      </el-input>\n                    </el-col>\n                    <el-col :span=\"5\" class=\"text-right\" >\n                      <el-button type=\"primary\" :loading=\"smsCodeLoading\" @click=\"getSMS\" style=\"padding: 10px 14px;\">{{smsBtnText}}</el-button>\n                    </el-col>\n                  </el-row>\n                <!--  <el-input  v-model=\"registerForm.msgVerifyCode\" placeholder=\"请输入手机验证码\">\n                    <template slot=\"append\">获取验证码</template>\n                  </el-input>-->\n                </el-form-item>\n                <el-form-item style=\"text-align: center;\">\n                  <el-button type=\"primary\" @click=\"submitForm('registerForm')\" :loading=\"loading\">{{btnText}}</el-button>\n                  <el-button @click=\"resetForm('registerForm')\">重置</el-button>\n                </el-form-item>\n              </div>\n            </pl-content-box-card>\n        </pl-content-box-block>\n        </el-form>\n      </pl-content-box>\n    </pl-layout>\n  </div>\n</template>\n\n<script>\n  import validators from 'src/core/utils/validators.js';\n//  import {MsgType} from 'core/constants';\n  import config from 'src/config';\n  export default {\n    mixins: [validators],\n    data () {\n      let validatePassword = (rule, value, callback) => {\n        if (value !== this.registerForm.password) {\n          callback(new Error('两次密码不一致'));\n        }\n        callback();\n      };\n      let validateVerifyCode = (rule, value, callback) => {\n        if (value === '' || !value) {\n          callback(new Error('请正确输入验证码'));\n          return;\n        }\n        this.$api.core.checkVertifyCode(value).then(ret => {\n          if (ret.type !== 'success') {\n            callback(new Error('验证码校验不通过'));\n            return;\n          }\n          callback();\n        });\n      };\n      let validateloginName = (rule, value, callback) => {\n        if (value === '' || !value) {\n          callback(new Error('请输入用户名称'));\n          return;\n        } else if (value.length < 3 || value.length > 30) {\n          callback(new Error('长度在 3 到 30 个字符'));\n          return;\n        }\n        this.$api.core.checkUserExist({'loginName': value,'reqType':'loginName'}).then(ret => {\n          if (ret.type === 'error') {\n            callback(new Error(ret.msg));\n            return;\n          }\n          callback();\n        });\n      };\n      let validateEmail = (rule, value, callback) => {\n        if (value === '' || !value) {\n          callback(new Error('请输入注册邮箱'));\n          return;\n        }\n        let apitemp = this.$api.core;\n        this.emailValidator(rule,value,function (result) {\n          if (!result) {\n            apitemp.checkUserExist({'email': value,'reqType':'email'}).then(ret => {\n              if (ret.type === 'error') {\n                callback(new Error(ret.msg));\n                return;\n              }\n              callback();\n            });\n          }else {\n            callback(result);\n          }\n        });\n\n      };\n      let validatePhoneNo = (rule, value, callback) => {\n        if (value === '' || !value) {\n          callback(new Error('请输入注册手机号'));\n          return;\n        }\n        this.telephoneValidator(rule,value,callback);\n      };\n      return {\n        registerForm: {\n          loginName: '',\n          email: '',\n          phoneNo: '',\n          contactorId: '',\n          password: '',\n          password2: '',\n          verifyCode: this.refreshVerifyCode(),\n          msgVerifyCode: ''\n        },\n        newUser: true,\n        loading: false,\n        time: 0,\n        smsCodeLoading: false,\n        btnText: '立即注册',\n        verifyCode: '',\n        rules: {\n          loginName: [\n            { required: true, message: '请输入您的账户名称', trigger: 'blur', validator: validateloginName },\n            { min: 2, max: 20, message: '长度在 3 到 30 个字符', trigger: 'blur' }\n          ],\n          email: [\n            { required: true, message: '请输入您的注册邮箱', trigger: 'blur', validator: validateEmail },\n            { min: 2, max: 20, message: '请检查邮箱有效性', trigger: 'blur' }\n          ],\n          phoneNo: [\n            {required: true, message: '手机号码不能为空', trigger: 'change'},\n            {callback: this.phoneCallback,required: true, trigger: 'blur', validator: validatePhoneNo, existForTrue: !this.newUser }\n          ],\n          password: [\n            { required: true, message: '请输入登录密码', trigger: 'blur' },\n            { min: 6, max: 20, message: '长度在 6 到 20 个字符', trigger: 'blur' }\n          ],\n          password2: [\n            { required: true, trigger: 'blur', validator: validatePassword }\n          ],\n          verifyCode: [\n            { required: true, trigger: 'blur', message: '请输入验证码', validator: validateVerifyCode }\n          ],\n          msgVerifyCode: [\n            { required: true, trigger: 'blur', message: '请输入手机验证码' }\n          ]\n        }\n      };\n    },\n    computed: {\n      smsBtnText () {\n        return this.smsCodeLoading ? this.time + 's' : '获取验证码';\n      }\n    },\n    watch: {\n      newUser () {\n        this.resetForm('registerForm');\n        this.registerForm.contactorId = '';\n      }\n    },\n    methods: {\n      phoneCallback (obj) {\n        if (obj) {\n          this.registerForm.loginName = obj.userName;\n          this.registerForm.contactorId = obj.userId;\n        } else {\n          this.registerForm.loginName = '';\n          this.registerForm.contactorId = '';\n        }\n      },\n      go (msg) {\n        if (msg.bean && msg.bean.serviceUrl) {\n          window.location.href = msg.bean.serviceUrl;\n        } else {\n          this.$router.push({'name': 'bsp.accreditation.register-success'});\n        }\n      },\n      getSMS () {\n        console.debug(\"getSMS...\");\n        this.$refs['registerForm'].validateField('phoneNo', errorMessage => {\n          console.debug(\"errorMessage=\"+errorMessage);\n          if (!errorMessage) {\n            this.smsCodeLoading = true;\n            this.time = 60;\n            let timer = setInterval(() => {\n              this.time--;\n              if (this.time === 0) {\n                this.smsCodeLoading = false;\n                clearInterval(timer);\n              }\n            }, 1000);\n            this.$api.cust.register.sendSMS({phoneNo: this.registerForm.phoneNo}).then(ret => {\n//              this.$notify({\n//                message: ret.msg,\n//                type: MsgType.INFO,\n//                duration: 3000\n//              });\n            });\n          }\n        });\n      },\n      submitForm (formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            this.loading = true;\n            this.btnText = '正在注册...';\n            this.$api.core.register(this.registerForm).then((ret) => {\n              this.loading = false;\n              this.btnText = '立即注册';\n              if (ret.type === 'success') {\n                // 注册成功之后登陆\n                let form = {};\n                form = {\n                  'username': this.registerForm.phoneNo,\n                  'password': this.registerForm.password,\n                  'kaptchaReceived': this.registerForm.verifyCode,\n                  'grant_type': 'password',\n                  'client': 'frontend',\n                  appCode: config.appCode\n                };\n                this.loading = true;\n                this.btnText = '正在登录...';\n                this.$store.dispatch('login', form)\n                  .then(({isLogin, msg}) => {\n                    this.loading = false;\n                    this.btnText = '立即注册';\n                    if (isLogin) {\n                      this.go(msg);\n                    }\n                  }\n                );\n              }\n            });\n          } else {\n            return false;\n          }\n        });\n      },\n      resetForm (formName) {\n        this.$refs[formName].resetFields();\n      },\n      refreshVerifyCode () {\n        this.loading = true;\n        this.$api.core.getCaptcha(Math.random()).then(res =>{\n          this.verifyCode=res.body;\n          this.loading = false;\n        });\n      },\n    }\n  };\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"./scss/style\";\n  /*.register-form{\n    width: 56%;\n    margin: 40px 22% 0 22%;\n    background-color: #fff;\n  }*/\n  .code-img{\n    height: 36px;\n    img{\n      cursor: pointer;\n    }\n    //background: url('../login/img/loading.gif') no-repeat center 0;\n  }\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/register/register.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('pl-header'),_vm._v(\" \"),_c('pl-layout',{staticClass:\"layout-contianer\",attrs:{\"show-left\":false}},[_c('pl-content-box',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"bolck-title\"},[_c('span',[_vm._v(\"注册信息\")])]),_vm._v(\" \"),_c('el-form',{ref:\"registerForm\",staticClass:\"register-form\",attrs:{\"model\":_vm.registerForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('pl-content-box-block',{attrs:{\"fixed-width\":false}},[_c('pl-content-box-card',{staticClass:\"accreditation-content-box no-border\"},[_c('div',{staticClass:\"accreditation-content\"},[_c('el-form-item',{attrs:{\"prop\":\"loginName\",\"label\":\"用户姓名\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-input',{attrs:{\"disabled\":!_vm.newUser,\"placeholder\":\"请输入用户姓名\",\"tips\":\"您的姓名将作为系统的用户名\"},model:{value:(_vm.registerForm.loginName),callback:function ($$v) {_vm.$set(_vm.registerForm, \"loginName\", $$v)},expression:\"registerForm.loginName\"}})],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"email\",\"label\":\"注册邮箱\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-input',{attrs:{\"placeholder\":\"请输入注册邮箱\",\"tips\":\"您的注册邮箱可作为登录账户名称\"},model:{value:(_vm.registerForm.email),callback:function ($$v) {_vm.$set(_vm.registerForm, \"email\", $$v)},expression:\"registerForm.email\"}})],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"phoneNo\",\"label\":\"手机号\"}},[_c('el-input',{attrs:{\"placeholder\":\"建议使用常用手机\",\"tips\":\"注册成功后，您可以用该手机登录和找回密码\"},model:{value:(_vm.registerForm.phoneNo),callback:function ($$v) {_vm.$set(_vm.registerForm, \"phoneNo\", $$v)},expression:\"registerForm.phoneNo\"}})],1),_vm._v(\" \"),(_vm.newUser)?_c('el-form-item',{attrs:{\"prop\":\"password\",\"label\":\"登录密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入登录密码\",\"tips\":\"建议使用字母、数字和符号两种以上的组合，6-20个字符\"},model:{value:(_vm.registerForm.password),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password\", $$v)},expression:\"registerForm.password\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.newUser)?_c('el-form-item',{attrs:{\"prop\":\"password2\",\"label\":\"确认密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请再次输入密码\",\"tips\":\"请再次输入密码\"},model:{value:(_vm.registerForm.password2),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password2\", $$v)},expression:\"registerForm.password2\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.newUser)?_c('el-form-item',{attrs:{\"prop\":\"verifyCode\",\"label\":\"验证码\"}},[_c('el-row',[_c('el-col',{staticStyle:{\"padding-right\":\"4px\"},attrs:{\"span\":20}},[_c('el-input',{attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.registerForm.verifyCode),callback:function ($$v) {_vm.$set(_vm.registerForm, \"verifyCode\", $$v)},expression:\"registerForm.verifyCode\"}})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"text-right\",attrs:{\"span\":4}},[_c('div',{staticClass:\"code-img\"},[_c('div',{attrs:{\"title\":\"点击刷新验证码\",\"width\":\"80\"},domProps:{\"innerHTML\":_vm._s(_vm.verifyCode)},on:{\"click\":_vm.refreshVerifyCode}})])])],1)],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"msgVerifyCode\",\"label\":\"短信验证码\"}},[_c('el-row',[_c('el-col',{staticStyle:{\"padding-right\":\"5px\"},attrs:{\"span\":19}},[_c('el-input',{attrs:{\"placeholder\":\"请输入手机验证码\"},model:{value:(_vm.registerForm.msgVerifyCode),callback:function ($$v) {_vm.$set(_vm.registerForm, \"msgVerifyCode\", $$v)},expression:\"registerForm.msgVerifyCode\"}})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"text-right\",attrs:{\"span\":5}},[_c('el-button',{staticStyle:{\"padding\":\"10px 14px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.smsCodeLoading},on:{\"click\":_vm.getSMS}},[_vm._v(_vm._s(_vm.smsBtnText))])],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":function($event){_vm.submitForm('registerForm')}}},[_vm._v(_vm._s(_vm.btnText))]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.resetForm('registerForm')}}},[_vm._v(\"重置\")])],1)],1)])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-71683f5d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/register/register.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-71683f5d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./register.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./register.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./register.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71683f5d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./register.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-71683f5d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/register/register.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}